{
  "pluginAlias": "SomfyProtect",
  "pluginType": "platform",
  "singular": true,
  "headerDisplay": "Modern Homebridge plugin for Somfy Protect home security systems. For help and documentation please see the [GitHub repository](https://github.com/jay-d-tyler/homebridge-somfy-protect).",
  "footerDisplay": "üí° **Tip:** After saving, check your Homebridge logs to see detected sites. If you have multiple sites, copy the site ID and add it to Advanced Settings.",
  "schema": {
    "type": "object",
    "required": ["username", "password"],
    "properties": {
      "name": {
        "title": "Name",
        "type": "string",
        "default": "Somfy Protect",
        "description": "The name that will appear in your Homebridge log."
      },
      "username": {
        "title": "Email Address",
        "type": "string",
        "required": true,
        "format": "email",
        "placeholder": "your.email@example.com",
        "description": "Your Somfy Protect account email (same as Somfy mobile app)"
      },
      "password": {
        "title": "Password",
        "type": "string",
        "required": true,
        "placeholder": "Enter your password",
        "description": "Your Somfy Protect account password",
        "x-schema-form": {
          "type": "password"
        }
      },
      "siteId": {
        "title": "Site ID",
        "type": "string",
        "placeholder": "Leave blank to auto-detect",
        "description": "üè† For multiple Somfy Protect sites: After saving, check logs to see all detected sites with their IDs. Copy the site ID you want to use and paste it here.",
        "condition": {
          "functionBody": "return model.username && model.password;"
        }
      },
      "pollingInterval": {
        "title": "Normal Polling Interval",
        "type": "integer",
        "default": 60000,
        "minimum": 5000,
        "maximum": 300000,
        "description": "‚è±Ô∏è How often to check alarm status when stable (milliseconds). Default: 60000 (60 seconds).",
        "x-schema-form": {
          "suffix": "ms"
        }
      },
      "adaptivePolling": {
        "title": "Enable Adaptive Polling",
        "type": "boolean",
        "default": true,
        "description": "üöÄ Automatically poll faster after state changes for quicker updates, then slow down when stable. Reduces API calls while staying responsive."
      },
      "fastPollingInterval": {
        "title": "Fast Polling Interval",
        "type": "integer",
        "default": 1000,
        "minimum": 1000,
        "maximum": 10000,
        "description": "‚ö° How often to check status after a state change (milliseconds). Default: 1000 (1 second). Only used when Adaptive Polling is enabled.",
        "condition": {
          "functionBody": "return model.adaptivePolling !== false;"
        },
        "x-schema-form": {
          "suffix": "ms"
        }
      },
      "fastPollingDuration": {
        "title": "Fast Polling Duration",
        "type": "integer",
        "default": 60000,
        "minimum": 10000,
        "maximum": 300000,
        "description": "‚è≤Ô∏è How long to use fast polling after a state change (milliseconds). Default: 60000 (60 seconds). After this, returns to normal polling.",
        "condition": {
          "functionBody": "return model.adaptivePolling !== false;"
        },
        "x-schema-form": {
          "suffix": "ms"
        }
      },
      "debug": {
        "title": "Debug Logging",
        "type": "boolean",
        "default": false,
        "description": "Enable debug logging for troubleshooting"
      }
    }
  },
  "layout": [
    {
      "type": "flex",
      "flex-flow": "row wrap",
      "items": [
        {
          "type": "flex",
          "flex-flow": "column",
          "items": ["username", "password"]
        }
      ]
    },
    {
      "type": "fieldset",
      "title": "Advanced Settings",
      "expandable": true,
      "expanded": false,
      "items": [
        "siteId",
        "pollingInterval",
        "adaptivePolling",
        "fastPollingInterval",
        "fastPollingDuration",
        "debug"
      ]
    }
  ]
}
